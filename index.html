<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Diablo â€” Ultimate Professional Engine</title>

<style>
:root{
--gold:#ffd700;--red:#ff3b3b;--blue:#00cfff;
--bg:#020202;--panel:#0b0b0b;
--radius:16px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:#fff;font-family:Tahoma,Arial;height:100vh;overflow:hidden}
.layer{display:none;position:absolute;inset:0}
.layer.active{display:flex;flex-direction:column}
.btn{background:var(--gold);color:#000;font-weight:900;border:none;
padding:12px 22px;border-radius:var(--radius);cursor:pointer}
.btn:disabled{opacity:.4;cursor:not-allowed}
.panel{background:var(--panel);border-radius:var(--radius);padding:20px}
#auth{justify-content:center;align-items:center}
#mapHeader{display:flex;justify-content:space-between;padding:15px;border-bottom:2px solid var(--gold)}
.map{flex:1;display:flex;justify-content:center;align-items:center}
.node{width:26px;height:26px;border-radius:50%;border:2px solid var(--gold);
position:absolute;cursor:pointer}
.node.boss{border-color:var(--red);width:32px;height:32px}
#battle{gap:10px}
.fighters{display:flex;justify-content:space-around;align-items:center}
.avatar{width:120px;height:120px;border-radius:50%;border:4px solid var(--gold);overflow:hidden}
.bar{width:140px;height:18px;background:#111;border-radius:9px;overflow:hidden;margin-top:8px}
.fill{height:100%;transition:.4s}
#skills{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;padding:10px}
#log{height:140px;overflow-y:auto;font-size:13px;background:#050505;padding:10px}
#skillTree{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.skillNode{border:2px solid #333;padding:10px;border-radius:12px;text-align:center;cursor:pointer}
.skillNode.unlocked{border-color:var(--gold);background:#111}
</style>
</head>

<body>

<!-- AUTH -->
<div id="auth" class="layer active">
  <div class="panel">
    <h2 style="text-align:center;color:var(--gold)">DIABLO</h2>
    <input id="key" type="password" placeholder="KEY"
      style="width:100%;margin:15px 0;padding:12px;text-align:center">
    <button class="btn" style="width:100%" onclick="Engine.login()">START</button>
  </div>
</div>

<!-- MAP -->
<div id="map" class="layer">
  <div id="mapHeader">
    <div>Ø§Ù„Ø±ØªØ¨Ø©: <b id="rank"></b></div>
    <div>ðŸ’° <span id="gold"></span></div>
  </div>
  <div class="map">
    <div class="node" style="top:40%;left:30%" onclick="Engine.startBattle('normal')"></div>
    <div class="node boss" style="top:55%;left:65%" onclick="Engine.startBattle('boss')"></div>
  </div>
</div>

<!-- BATTLE -->
<div id="battle" class="layer">
  <div class="fighters">
    <div>
      <div class="avatar"><img src="" width="100%" height="100%"></div>
      <div class="bar"><div id="php" class="fill" style="background:#0f0"></div></div>
    </div>
    <div style="font-size:32px">VS</div>
    <div>
      <div class="avatar" style="border-color:var(--red)"></div>
      <div class="bar"><div id="ehp" class="fill" style="background:#f00"></div></div>
    </div>
  </div>

  <div id="skills"></div>
  <div id="log"></div>

  <div style="text-align:center">
    <button class="btn" onclick="Engine.leaveBattle()">Ø§Ù†Ø³Ø­Ø§Ø¨</button>
  </div>
</div>

<!-- SKILL TREE -->
<div id="tree" class="layer">
  <div class="panel">
    <h3>Ø´Ø¬Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
    <div id="skillTree"></div>
    <br>
    <button class="btn" onclick="Engine.show('map')">Ø±Ø¬ÙˆØ¹</button>
  </div>
</div>

<script>
const Engine={
state:{
 rank:"Ù…Ø¨ØªØ¯Ø¦",
 gold:100,
 hp:1000,mhp:1000,
 enemy:{hp:0,mhp:0},
 skills:[
  {id:"slash",name:"Ø¶Ø±Ø¨Ø© Ù‚Ø§Ø·Ø¹Ø©",dmg:180,cd:0,max:2,unlocked:true},
  {id:"fire",name:"Ù†Ø§Ø± Ø§Ù„Ø¬Ø­ÙŠÙ…",dmg:320,cd:0,max:4,unlocked:false},
  {id:"heal",name:"Ø´ÙØ§Ø¡",heal:250,cd:0,max:5,unlocked:false}
 ]
},

login(){
 if(key.value!=="123")return;
 this.load();this.show("map");this.ui();
},

show(id){
 document.querySelectorAll(".layer").forEach(l=>l.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 if(id==="tree")this.renderTree();
},

ui(){
 rank.textContent=this.state.rank;
 gold.textContent=this.state.gold;
 php.style.width=this.state.hp/this.state.mhp*100+"%";
 ehp.style.width=this.state.enemy.hp/this.state.enemy.mhp*100+"%";
},

startBattle(type){
 this.state.enemy.mhp= type==="boss"?2200:1400;
 this.state.enemy.hp=this.state.enemy.mhp;
 this.show("battle");
 this.log("âš”ï¸ Ø¨Ø¯Ø£ Ø§Ù„Ù‚ØªØ§Ù„");
 this.renderSkills();
 this.ui();
},

renderSkills(){
 skills.innerHTML="";
 this.state.skills.forEach(s=>{
  if(!s.unlocked)return;
  const b=document.createElement("button");
  b.className="btn";
  b.textContent=`${s.name} (${s.cd})`;
  b.disabled=s.cd>0;
  b.onclick=()=>this.useSkill(s.id);
  skills.appendChild(b);
 });
},

useSkill(id){
 const s=this.state.skills.find(x=>x.id===id);
 if(!s||s.cd>0)return;
 if(s.dmg)this.state.enemy.hp-=s.dmg;
 if(s.heal)this.state.hp=Math.min(this.state.mhp,this.state.hp+s.heal);
 s.cd=s.max;
 this.log("âœ¨ "+s.name);
 if(this.state.enemy.hp<=0)return this.win();
 this.enemyTurn();this.tick();this.ui();this.renderSkills();
},

enemyTurn(){
 const dmg=160;
 this.state.hp-=dmg;
 this.log("ðŸ‘¹ Ø§Ù„Ø¹Ø¯Ùˆ Ø¶Ø±Ø¨Ùƒ "+dmg);
 if(this.state.hp<=0)this.lose();
},

tick(){
 this.state.skills.forEach(s=>{if(s.cd>0)s.cd--});
},

win(){
 this.log("ðŸ† Ù†ØµØ±!");
 this.state.gold+=300;
 if(this.state.gold>=400)this.state.skills[1].unlocked=true;
 if(this.state.gold>=700)this.state.skills[2].unlocked=true;
 this.save();this.leaveBattle();
},

lose(){
 this.log("ðŸ’€ Ù‡Ø²ÙŠÙ…Ø©");
 this.state.hp=this.state.mhp;
 this.leaveBattle();
},

leaveBattle(){
 this.show("map");this.ui();
},

renderTree(){
 skillTree.innerHTML="";
 this.state.skills.forEach(s=>{
  const d=document.createElement("div");
  d.className="skillNode "+(s.unlocked?"unlocked":"");
  d.textContent=s.name;
  skillTree.appendChild(d);
 });
},

log(t){
 log.innerHTML="<div>"+t+"</div>"+log.innerHTML;
},

save(){localStorage.setItem("diablo",JSON.stringify(this.state))},
load(){const d=localStorage.getItem("diablo");if(d)this.state=JSON.parse(d)}
};
</script>
</body>
</html>
