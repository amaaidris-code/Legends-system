<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Diablo â€” Genesis of the Sovereign</title>

<style>
/* ======================================================
   CORE VARIABLES
====================================================== */
:root{
--gold:#ffd700;--red:#ff3e3e;--blue:#00d4ff;
--bg:#020202;--panel:#0b0b0b;
--neon:0 0 25px var(--gold);
--font:'Segoe UI',Tahoma,sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%;background:var(--bg);color:white;font-family:var(--font);overflow:hidden}

/* ======================================================
   LAYERS
====================================================== */
.layer{position:absolute;inset:0;display:none;flex-direction:column}
.layer.active{display:flex;animation:fade 0.6s}
@keyframes fade{from{opacity:0;transform:scale(1.05)}to{opacity:1;transform:none}}

/* ======================================================
   BUTTONS & UI
====================================================== */
.btn{background:var(--gold);color:#000;border:none;
padding:14px 30px;border-radius:12px;font-weight:900;
cursor:pointer;transition:.3s}
.btn:hover{box-shadow:0 0 25px var(--gold);transform:translateY(-2px)}

.panel{background:var(--panel);border:2px solid #222;border-radius:18px;padding:25px}

/* ======================================================
   AUTH
====================================================== */
#auth{justify-content:center;align-items:center}
#auth input{width:100%;padding:18px;font-size:22px;
background:#000;border:2px solid #222;color:var(--gold);
text-align:center;border-radius:15px;margin:25px 0}

/* ======================================================
   MAP
====================================================== */
#map-header{display:flex;justify-content:space-between;
padding:18px;border-bottom:2px solid var(--gold)}
.map-frame{position:relative;margin:auto;border:3px solid #222;
border-radius:30px;overflow:hidden}
.map-frame img{max-width:92vw;max-height:70vh;display:block}
.node{position:absolute;width:24px;height:24px;border-radius:50%;
border:2px solid var(--gold);background:#000;
transform:translate(-50%,-50%);
cursor:pointer}
.node:hover{box-shadow:0 0 25px var(--gold);background:var(--gold)}
.node.city{border-color:var(--blue)}
.node.boss{border-color:var(--red);width:30px;height:30px}

/* ======================================================
   BATTLE
====================================================== */
.battle{flex:1;display:flex;flex-direction:column}
.fighters{flex:1;display:flex;justify-content:space-around;
align-items:center}
.avatar{width:140px;height:140px;border-radius:50%;
border:5px solid var(--gold);overflow:hidden}
.bar{width:100%;height:24px;background:#111;border-radius:12px;
overflow:hidden;margin-top:10px}
.fill{height:100%;transition:.6s}
.log{height:150px;background:#050505;border-top:2px solid #222;
padding:15px;overflow-y:auto;font-family:monospace;font-size:13px}

/* ======================================================
   MOBILE
====================================================== */
@media(max-width:600px){
.avatar{width:110px;height:110px}
}
</style>
</head>

<body>

<!-- ================= AUTH ================= -->
<div id="auth" class="layer active">
  <div class="panel" style="max-width:420px;text-align:center">
    <h1 style="color:var(--gold);letter-spacing:6px">DIABLO</h1>
    <input id="key" type="password" placeholder="â€¢â€¢â€¢â€¢">
    <button class="btn" onclick="Engine.login()">INITIALIZE</button>
  </div>
</div>

<!-- ================= MAP ================= -->
<div id="map" class="layer">
  <div id="map-header">
    <div>Ø¯ÙŠØ§Ø¨Ù„Ùˆ â€” <b id="rank"></b></div>
    <div>ğŸ’° <span id="gold"></span></div>
  </div>
  <div class="map-frame">
    <img src="map.jpg" onerror="this.src='https://i.imgur.com/Z6XKQ5F.jpeg'">
    <div class="node city" style="top:20%;left:40%" onclick="Engine.enterCity('capital')"></div>
    <div class="node city" style="top:65%;left:25%" onclick="Engine.enterCity('harbor')"></div>
    <div class="node boss" style="top:35%;left:75%" onclick="Engine.startBattle()"></div>
  </div>
</div>

<!-- ================= BATTLE ================= -->
<div id="battle" class="layer">
  <div class="battle">
    <div class="fighters">
      <div>
        <div class="avatar"><img src="p.jpg" width="100%" height="100%" onerror="this.src='https://i.imgur.com/4AiXzf8.jpeg'"></div>
        <div class="bar"><div id="php" class="fill" style="background:#0f0"></div></div>
      </div>
      <div style="font-size:40px;color:var(--gold)">VS</div>
      <div>
        <div class="avatar" style="border-color:var(--red)">
          <img src="e.jpg" width="100%" height="100%" onerror="this.src='https://i.imgur.com/QZ7Q6Qk.jpeg'">
        </div>
        <div class="bar"><div id="ehp" class="fill" style="background:#f00"></div></div>
      </div>
    </div>
    <div class="log" id="log"></div>
    <div style="padding:15px;text-align:center">
      <button class="btn" onclick="Engine.attack()">Ù‡Ø¬ÙˆÙ…</button>
      <button class="btn" style="background:#333;color:#fff" onclick="Engine.leaveBattle()">Ø§Ù†Ø³Ø­Ø§Ø¨</button>
    </div>
  </div>
</div>

<script>
/* ======================================================
   ENGINE CORE â€” ULTIMATE
====================================================== */
const Engine={
state:{
 gold:100,rank:"Ù…Ø¨ØªØ¯Ø¦",hp:1000,mhp:1000,
 enemy:{hp:1500,mhp:1500,ai:"aggressive"},
 city:null
},

login(){
 if(document.getElementById("key").value!=="123")return;
 this.load();
 this.show("map");
 this.ui();
},

show(id){
 document.querySelectorAll(".layer").forEach(l=>l.classList.remove("active"));
 document.getElementById(id).classList.add("active");
},

ui(){
 rank.textContent=this.state.rank;
 gold.textContent=this.state.gold;
 php.style.width=(this.state.hp/this.state.mhp*100)+"%";
 ehp.style.width=(this.state.enemy.hp/this.state.enemy.mhp*100)+"%";
},

save(){
 localStorage.setItem("diabloSave",JSON.stringify(this.state));
},

load(){
 const d=localStorage.getItem("diabloSave");
 if(d)this.state=JSON.parse(d);
},

enterCity(c){
 this.state.city=c;
 this.log("Ø¯Ø®Ù„Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: "+c);
},

startBattle(){
 this.state.enemy.hp=this.state.enemy.mhp;
 this.show("battle");
 this.log("âš”ï¸ Ø¨Ø¯Ø£ Ø§Ù„Ù‚ØªØ§Ù„!");
 this.ui();
},

attack(){
 const dmg=200;
 this.state.enemy.hp-=dmg;
 this.log("Ø¯ÙŠØ§Ø¨Ù„Ùˆ ÙŠÙ‡Ø§Ø¬Ù…: "+dmg);
 if(this.state.enemy.hp<=0)return this.win();
 this.enemyTurn();
 this.ui();
},

enemyTurn(){
 let d= this.state.enemy.ai==="aggressive"?180:120;
 this.state.hp-=d;
 this.log("Ø§Ù„Ø¹Ø¯Ùˆ ÙŠØ¶Ø±Ø¨Ùƒ: "+d);
 if(this.state.hp<=0)this.lose();
},

win(){
 this.log("ğŸ† Ù†ØµØ±!");
 this.state.gold+=500;
 this.state.rank="Ø´ÙŠØ·Ø§Ù† Ø¹Ø¸ÙŠÙ…";
 this.save();
 this.leaveBattle();
},

lose(){
 this.log("ğŸ’€ Ù‡Ø²ÙŠÙ…Ø©...");
 this.state.hp=this.state.mhp;
 this.leaveBattle();
},

leaveBattle(){
 this.show("map");
 this.ui();
},

log(t){
 const l=document.getElementById("log");
 l.innerHTML="<div>"+t+"</div>"+l.innerHTML;
}
};
</script>

</body>
</html>
