<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legends System - Story Mode</title>
    <style>
        body { background: #000; color: gold; font-family: sans-serif; text-align: center; direction: rtl; margin: 0; overflow-x: hidden; }
        .screen { display: none; padding: 10px; }
        .active { display: block; }
        
        /* تسجيل الدخول */
        .login-box { margin-top: 50px; background: #111; padding: 20px; border: 2px solid gold; display: inline-block; border-radius: 10px; width: 90%; max-width: 400px; }
        input, select { padding: 12px; margin: 10px 0; width: 100%; background: #222; color: white; border: 1px solid gold; border-radius: 5px; box-sizing: border-box; }
        .btn { background: gold; color: black; padding: 12px 25px; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; width: 100%; margin-top: 10px; }

        /* الخريطة */
        .status-bar { background: #1a1a1a; padding: 10px; border-bottom: 2px solid gold; font-size: 14px; display: flex; justify-content: space-around; }
        .map-wrapper { position: relative; display: inline-block; margin-top: 15px; line-height: 0; }
        .map-img { width: 100%; max-width: 1000px; border: 2px solid #444; }
        
        /* الدوائر التفاعلية بدقة فوق رؤوس الشخصيات */
        .map-dot { 
            position: absolute; width: 10%; height: 10%; 
            border: 2px solid gold; border-radius: 50%; 
            background: rgba(255, 215, 0, 0.15); cursor: pointer;
            transform: translate(-50%, -50%);
        }

        /* الإحداثيات المحدثة بناءً على الصورة المرفقة */
        #loc-1 { top: 12%; left: 37%; } /* الشخصية العلوية يسار */
        #loc-2 { top: 25%; left: 70%; } /* شخصية الكولوسيوم (يمين علوي) */
        #loc-3 { top: 38%; left: 16%; } /* الشخصية النارية (يسار منتصف) */
        #loc-4 { top: 48%; left: 49%; } /* الشخصية المركزية (النقابة) */
        #loc-5 { top: 51%; left: 85%; } /* شخصية البنك (أقصى اليمين) */
        #loc-6 { top: 56%; left: 18%; } /* شخصية الساحر (أسفل اليسار) */
        #loc-7 { top: 74%; left: 29%; } /* شخصية أسفل يسار */
        #loc-8 { top: 78%; left: 56%; } /* شخصية الحانة (أسفل منتصف) */

        #location-screen { padding: 40px 20px; }
        #location-content { background: #111; border: 1px solid gold; padding: 30px; border-radius: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>

    <div id="login-screen" class="screen active">
        <div class="login-box">
            <h2>Legends System</h2>
            <p>سجل هويتك لدخول القصة</p>
            <input type="text" id="user-name" placeholder="اسم اللاعب">
            <select id="char-choice">
                <option value="ديابلو">ديابلو</option>
                <option value="ريمورو">ريمورو</option>
                <option value="لوفي">لوفي</option>
            </select>
            <input type="password" id="user-pass" placeholder="كلمة السر">
            <button class="btn" onclick="enterWorld()">دخول العالم</button>
        </div>
    </div>

    <div id="map-screen" class="screen">
        <div class="status-bar">
            <span>اللاعب: <b id="p-name"></b></span>
            <span>الذهب: <b id="p-gold">100</b></span>
        </div>
        <h3 style="margin: 15px 0;">اختر وجهتك من الخريطة</h3>
        <div class="map-wrapper">
            <img src="20260128_183545.jpg" class="map-img">
            
            <div id="loc-1" class="map-dot" onclick="visit('مكان التدريب')"></div>
            <div id="loc-2" class="map-dot" onclick="visit('الكولوسيوم الملكي')"></div>
            <div id="loc-3" class="map-dot" onclick="visit('المنطقة النارية')"></div>
            <div id="loc-4" class="map-dot" onclick="visit('نقابة المغامرين')"></div>
            <div id="loc-5" class="map-dot" onclick="visit('البنك الملكي')"></div>
            <div id="loc-6" class="map-dot" onclick="visit('مختبر السحر')"></div>
            <div id="loc-7" class="map-dot" onclick="visit('مكتبة الأسرار')"></div>
            <div id="loc-8" class="map-dot" onclick="visit('حانة الأساطير')"></div>
        </div>
    </div>

    <div id="location-screen" class="screen">
        <h1 id="loc-title" style="color: gold;"></h1>
        <div id="location-content">
            <p id="loc-desc" style="font-size: 18px;"></p>
        </div>
        <button class="btn" onclick="showMap()">العودة للخريطة</button>
    </div>

    <script>
        let pData = { name: "", gold: 100 };

        function enterWorld() {
            const name = document.getElementById('user-name').value;
            if(!name) return alert("أدخل اسمك أولاً");
            pData.name = name;
            document.getElementById('p-name').innerText = name;
            changeScreen('map-screen');
        }

        function visit(name) {
            document.getElementById('loc-title').innerText = name;
            let desc = "";
            if(name === 'البنك الملكي') desc = "أهلاً بك في البنك. يمكنك هنا إيداع الذهب لحمايته من السرقة.";
            else if(name === 'نقابة المغامرين') desc = "هنا تجد المهام اليومية لرفع رتبتك كـ مغامر أسطوري.";
            else if(name === 'حانة الأساطير') desc = "مكان هادئ لسماع الشائعات والحصول على معلومات سرية.";
            else desc = "هذا المكان مغلق حالياً، سيتم فتحه في الفصل القادم من القصة.";
            
            document.getElementById('loc-desc').innerText = desc;
            changeScreen('location-screen');
        }

        function showMap() { changeScreen('map-screen'); }
        function changeScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
    </script>
</body>
</html>
